<html>
<head>
<title> WebGL FX V1.0 by wysaid </title>
<meta http-equiv="content-type" content="text/html; charset=gbk">
<style>
.fxNotChosen
{
	border:groove; position:relative;display:block;width:100%;height:30px;text-align:center;cursor:pointer;
    background-color: #d0d0d0;
}
.fxChosen
{
	border:groove; position:relative;display:block;width:100%;height:30px;text-align:center;cursor:pointer;
	background-color: #ff0000;
}

.effectsNotChosen 
{
	border:groove; display:block;text-align:center;cursor:pointer;
    margin:4px 4px;border:groove;width:auto; height:25px; float:left;
    background-color: #d0d0d0;
}

.effectsChosen
{
	border:groove; display:block;text-align:center;cursor:pointer;
    margin:4px 4px;border:groove;width:auto; height:25px; float:left;
    background-color: #ff0000;
}
</style>
<script type="text/javascript">
    //defines golbal vars;
    var fxNum = 100;
</script>
<script type="text/javascript" src="effectsEnum.js"></script>
<script type="text/javascript" src="glfunctions.js"></script>
<script type="text/javascript" src="myfunctions.js"></script>
<script type="text/javascript" src="renderfunction.js"></script>
<script type="text/javascript" id="mainjs">
    function resizeCanvs() {
        var c = document.getElementById("fxView");
        var d = document.getElementById("canvasView");
        c.setAttribute("width", d.clientWidth);
        c.setAttribute("height", d.clientHeight);
    }
</script>
</head>

<body onload="resizeCanvs();renderWaveV();" onresize="resizeCanvs()">

<script id="default-vsh" type="x-shader/x-vertex">
precision mediump float;
attribute vec4 position;
attribute vec4 inputTextureCoordinate;
varying vec2 textureCoordinate;
void main()
{
	gl_Position = position;
	textureCoordinate = vec2((position.x+1.0)/2.0, 1.0-(position.y+1.0)/2.0);
}
</script>
<script type="x-shader/x-fragment" id="default-fsh">
precision mediump float;
varying vec2 textureCoordinate;
uniform sampler2D inputImageTexture;
void main()
{
	gl_FragColor = texture2D(inputImageTexture, textureCoordinate);
}
</script>
<script type="text/javascript">

var lastFX = null;
var lastEffect = null;

function doFX(obj) {
    if (lastFX != null) lastFX.setAttribute("class", "fxNotChosen");
    if (lastEffect != null) lastEffect.setAttribute("class", "effectsNotChosen");
    obj.setAttribute("class", "fxChosen");
    obj.innerHTML = "Not Available";
    lastFX = obj;
    lastEffect = null;
}

function doEffects(obj) {
    if (lastEffect != null) lastEffect.setAttribute("class", "effectsNotChosen");
    if (lastFX != null) lastFX.setAttribute("class", "fxNotChosen")
    obj.setAttribute("class", "effectsChosen");
    lastEffect = obj;
    lastFX = null;
}

</script>
<div style="position:relative; margin:auto auto 10px 10px; width:96%; max-height:13%; border:groove; overflow-y:auto;overflow-x:hidden" id="myEffectsView" >
     
	<script type="text/javascript">

	    var menu = document.getElementById("myEffectsView");
	    for (obj in effectsEnum) {
	        var child = document.createElement("div");
	        child.setAttribute("class", "effectsNotChosen");
	        child.setAttribute("onclick", "doEffects(this);renderGLWithScriptName('" + effectsEnum[obj] + "')");
	        child.setAttribute("id", "effect_" + effectsEnum[obj]);
	        child.innerHTML = effectsEnum[obj];
	        menu.appendChild(child);
	    }

	</script>
</div>

<div style="position:absolute; margin:10px auto auto 15%; width:80%; height:80%; border:groove;" id ="canvasView">
<canvas id="fxView" style="border:solid; ">
</canvas>
</div>

<div style="position:absolute; margin:10px auto auto 8px; width:13%; height:80%; border:groove;overflow-y:auto;overflow-x:hidden" id="menuView">
	<script type="text/javascript">

	    var menu = document.getElementById("menuView");
	    var i;
	    for (i = 0; i != fxNum; ++i) {
	        var child = document.createElement("div");
	        child.setAttribute("class", "fxNotChosen");
	        child.setAttribute("onclick", "doFX(this)");
	        child.setAttribute("id", "fx_" + i);
	        child.innerHTML = "FX: " + i;
	        menu.appendChild(child);
	    }

	</script>
</div>

<img src = "test.jpg" style="display:none" id="inputImage">
</body>
<div style="display:none">
    <script type="text/javascript" src="http://tajs.qq.com/stats?sId=23413950" charset="UTF-8"></script>
</div>
</html>